{% extends "admin_layout.html" %}
{% block admin_content %}

<div class="card shadow-lg">
  <div class="card-header bg-gradient-success text-white">
    <h5 class="mb-0">
      <i class="material-icons">pending_actions</i>
      管理员后台 - 待处理申请
    </h5>
  </div>

  <div class="card-body px-0 pb-2">
    {% if requests %}
    <div class="table-responsive">
      <table class="table align-items-center mb-0">
        <thead>
          <tr>
            <th>书籍信息</th>
            <th>申请内容</th>
            <th class="text-center">申请人</th>
            <th class="text-center">申请时间</th>
            <th class="text-center">操作</th>
          </tr>
        </thead>
        <tbody>
          {% for req in requests %}
          <tr>
            <td>
              <h6 class="mb-0 text-sm">{{ req[2] }}</h6>
              <p class="text-xs text-secondary mb-0">ISBN: {{ req[1] }}</p>
            </td>
            <td>{{ req[3] }}</td>
            <td class="text-center">
              <span class="badge bg-gradient-info">{{ req[4] }}</span>
            </td>
            <td class="text-center text-sm">{{ req[5] }}</td>
            <td class="text-center">
              <form method="post" class="d-inline">
                <input type="hidden" name="req_id" value="{{ req[0] }}">
                <button name="decision" value="approve"
                        class="btn btn-success btn-sm">
                  <i class="material-icons text-sm">check</i>
                </button>
                <button name="decision" value="reject"
                        class="btn btn-danger btn-sm">
                  <i class="material-icons text-sm">close</i>
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="text-center py-5 text-muted">
      <i class="material-icons" style="font-size:64px;">check_circle</i>
      <p class="mt-3">暂无待处理申请</p>
    </div>
    {% endif %}
  </div>
</div>

{% endblock %}
